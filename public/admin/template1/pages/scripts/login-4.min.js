var Login=function(){var e=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{username:{required:!0},password:{required:!0},remember:{required:!1}},messages:{username:{required:"Username is required."},password:{required:"Password is required."}},invalidHandler:function(e,r){$(".alert-danger",$(".login-form")).show()},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){e.submit()}}),$(".login-form input").keypress(function(e){if(13==e.which)return $(".login-form").validate().form()&&$(".login-form").submit(),!1})};return{init:function(){e(),$.backstretch(["/admin/template1/pages/media/bg/1.jpg","/admin/template1/pages/media/bg/2.jpg","/admin/template1/pages/media/bg/3.jpg","/admin/template1/pages/media/bg/4.jpg"],{fade:1e3,duration:8e3})}}}();jQuery(document).ready(function(){Login.init();var e=$(".verifyimg").attr("src");$(".reloadverify").click(function(){e.indexOf("?")>0?$(".verifyimg").attr("src",e+"&random="+Math.random()):$(".verifyimg").attr("src",e.replace(/\?.*$/,"")+"?"+Math.random())}),$("#username").blur(function(){""==$(this).val()?$("#user-check").show(1e3):$("#user-check").hide(1e3)}),$("#password").blur(function(){""==$(this).val()?$("#password-check").show(1e3):$("#password-check").hide(1e3)}),$("#verify").blur(function(){""==$(this).val()?$("#verify-check").show(1e3):$("#verify-check").hide(1e3)}),$("#loginBtn").click(function(){$.ajax({type:"POST",url:"/admin/Account/checkVerify",dataType:"json",data:{verify:$("#verify").val()},success:function(r){r.success===!1?($("#verify-tips").slideDown(),$(".verifyimg").attr("src",e.replace(/\?.*$/,"")+"?"+Math.random())):$.ajax({type:"POST",url:"/admin/Account/checkLogin",dataType:"json",data:{username:$("#username").val(),password:$("#password").val()},success:function(e){e.success===!1?($("#errorTip").text(e.data.error),$("#login-error").slideDown()):location.href="/admin/Index/index"}})}})}),$("#verify").keypress(function(e){13==e.which&&$("#loginBtn").click()})});